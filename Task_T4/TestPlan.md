# План тестирования взаимодействия сервисов А и В

## Введение
Цель данного тест-плана заключается в проверке корректности взаимодействия между сервисами А и В

Сервис А принимает REST запросы на подключение, отключение и блокирование услуги, отправляет сообщения сервису В, который выполняет эти действия и отправляет обратно результаты выполнения.

## Цели тестирования
1. Проверить правильность обработки REST запросов сервисом А.
2. Убедиться в корректной отправке и получении сообщений через RabbitMQ.
3. Проверить правильность выполнения команд сервисом В.
4. Убедиться в корректном изменении состояния услуги в сервисе А после получения положительного ответа от сервиса В.

## Тестовые случаи

### 1. Позитивные тесты
1. **Обработка запроса на подключение услуги**
    - **Описание:** Проверка корректности обработки запроса на подключение услуги.
    - **Входные данные:** REST запрос на подключение услуги.
    - **Ожидаемый результат:** Сервис А отправляет сообщение сервису В, который выполняет подключение и возвращает положительный ответ. Сервис А обновляет статус услуги.

2. **Обработка запроса на отключение услуги**
    - **Описание:** Проверка корректности обработки запроса на отключение услуги.
    - **Входные данные:** REST запрос на отключение услуги.
    - **Ожидаемый результат:** Сервис А отправляет сообщение сервису В, который выполняет отключение и возвращает положительный ответ. Сервис А обновляет статус услуги.

3. **Обработка запроса на блокировку услуги**
    - **Описание:** Проверка корректности обработки запроса на блокировку услуги.
    - **Входные данные:** REST запрос на блокировку услуги.
    - **Ожидаемый результат:** Сервис А отправляет сообщение сервису В, который выполняет блокировку и возвращает положительный ответ. Сервис А обновляет статус услуги.

### 2. Негативные тесты
1. **Обработка невалидного REST запроса**
    - **Описание:** Проверка корректности обработки невалидного REST запроса.
    - **Входные данные:** Некорректный REST запрос.
    - **Ожидаемый результат:** Сервис А возвращает соответствующий код ошибки (например, 400 Bad Request).

2. **Ошибка при отправке сообщения в RabbitMQ**
    - **Описание:** Проверка обработки ошибок при отправке сообщения в RabbitMQ.
    - **Входные данные:** REST запрос на выполнение действия, при этом RabbitMQ недоступен.
    - **Ожидаемый результат:** Сервис А возвращает соответствующий код ошибки (например, 500 Internal Server Error).

3. **Ошибка при выполнении команды сервисом В**
    - **Описание:** Проверка обработки ошибок, возвращаемых сервисом В.
    - **Входные данные:** REST запрос на выполнение действия, сервис В возвращает ошибку.
    - **Ожидаемый результат:** Сервис А не обновляет статус услуги и возвращает соответствующий код ошибки.

### 3. Тесты на обработку последовательности команд
1. **Последовательная обработка команд**
    - **Описание:** Проверка корректности обработки последовательных команд.
    - **Входные данные:** Последовательные REST запросы на выполнение действий (например, подключение, затем отключение).
    - **Ожидаемый результат:** Сервис А отправляет команду сервису В, ждет ответа, затем отправляет следующую команду.

2. **Параллельные запросы на выполнение команд**
    - **Описание:** Проверка корректности обработки параллельных запросов на выполнение команд.
    - **Входные данные:** Одновременные REST запросы на выполнение различных действий.
    - **Ожидаемый результат:** Сервис А обрабатывает команды последовательно, отправляя их в сервис В по очереди.

### 4. Тесты на корректное изменение состояния услуги
1. **Изменение состояния услуги после успешного выполнения команды**
    - **Описание:** Проверка корректного изменения состояния услуги после получения положительного ответа от сервиса В.
    - **Входные данные:** REST запрос на выполнение действия.
    - **Ожидаемый результат:** Сервис А получает положительный ответ от сервиса В и обновляет состояние услуги.

2. **Отсутствие изменения состояния услуги после неуспешного выполнения команды**
    - **Описание:** Проверка отсутствия изменения состояния услуги после получения отрицательного ответа от сервиса В.
    - **Входные данные:** REST запрос на выполнение действия, сервис В возвращает ошибку.
    - **Ожидаемый результат:** Сервис А не обновляет состояние услуги и возвращает соответствующий код ошибки.

## Критерии успешного завершения тестирования
- Составлены тест-кейсы.
- Тест-кейсы успешно пройдены.
- Найденные баги оформлены в баг-репорты.